<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Operacional LogÃ­stico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #f1f5f9;
  }

  header {
    background: linear-gradient(90deg, #1e3a8a, #dc2626);
    color: #fff;
    padding: 20px;
    text-align: center;
  }

  main {
    padding: 30px;
    max-width: 1100px;
    margin: auto;
  }

  .cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px;
  }

  .card {
    background: #ffffff;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    text-decoration: none;
    color: #1f2937;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 18px rgba(0,0,0,0.12);
  }

  .icon {
    font-size: 36px;
    margin-bottom: 10px;
  }

  .title {
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 6px;
  }

  .desc {
    font-size: 13px;
    color: #475569;
  }

  footer {
    text-align: center;
    padding: 15px;
    font-size: 12px;
    color: #64748b;
  }
</style>
</head>

<body>
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCKdfOvWehaJcuK6uX5JXxc7YdN26h8sXY",
  authDomain: "tabela-frete-rio-branco.firebaseapp.com",
  projectId: "tabela-frete-rio-branco",
  storageBucket: "tabela-frete-rio-branco.firebasestorage.app",
  messagingSenderId: "765019849831",
  appId: "1:765019849831:web:f2089ab12a3eb7ea6880c2"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

onAuthStateChanged(auth, async (user) => {

  if (!user) {
    window.location.href = "login.html";
    return;
  }

  const userRef = doc(db, "usuarios", user.uid);
  const userSnap = await getDoc(userRef);

  if (!userSnap.exists()) {
    window.location.href = "login.html";
    return;
  }

  const dados = userSnap.data();

  // Mostrar nome no topo
  document.getElementById("usuarioLogado").innerText =
    "UsuÃ¡rio: " + dados.nome + " (" + dados.perfil.toUpperCase() + ")";

  // ğŸ” LIBERAR MENUS CONFORME PERMISSÃƒO

  if (dados.menus?.painel) {
    document.getElementById("cardPainelFila").style.display = "block";
  }

  if (dados.menus?.frete) {
    document.getElementById("cardFrete").style.display = "block";
  }

  if (dados.menus?.clientes) {
    document.getElementById("cardClientes").style.display = "block";
    document.getElementById("cardMapa").style.display = "block";
  }

  if (dados.menus?.usuarios) {
    document.getElementById("cardUsuarios").style.display = "block";
  }
// ğŸ”’ Ferramentas administrativas
if (dados.perfil === "admin") {
  document.getElementById("cardImportar").style.display = "block";
  document.getElementById("cardConsumo").style.display = "block";
}

  // Se for admin, libera tudo
  if (dados.perfil === "admin") {
    document.querySelectorAll(".card").forEach(card => {
      card.style.display = "block";
    });
  }

});



// Logout
window.logout = function() {
  signOut(auth).then(() => {
    window.location.href = "login.html";
  });
};

</script>


<header>
  <button onclick="logout()" style="
  position: absolute;
  top: 20px;
  right: 20px;
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  background: #dc2626;
  color: #fff;
  cursor: pointer;
">
  Sair
</button>

  <h1>ğŸšš Painel Operacional LogÃ­stico</h1>
  <p>Central unificada dos sistemas da operaÃ§Ã£o</p>
  <p id="usuarioLogado" style="margin-top:8px;font-size:13px;opacity:0.9;"></p>

</header>

<main>
  <div class="cards">
<a class="card" href="importar-clientes.html" id="cardImportar" style="display:none;">
  <div class="icon">ğŸ“¥</div>
  <div class="title">Importar Clientes</div>
  <div class="desc">Carga massiva e atualizaÃ§Ã£o de clientes</div>
</a>

<a class="card" href="consumo-firestore.html" id="cardConsumo" style="display:none;">
  <div class="icon">ğŸ“Š</div>
  <div class="title">Consumo Firestore</div>
  <div class="desc">Monitoramento de leituras e gravaÃ§Ãµes</div>
</a>

 <a class="card" href="usuarios-admin.html" id="cardUsuarios" style="display:none;">
  <div class="icon">ğŸ‘¤</div>
  <div class="title">Controle de UsuÃ¡rios</div>
  <div class="desc">GestÃ£o de acessos e permissÃµes</div>
</a>


    <a class="card" href="leitura.html" id="cardFila" style="display:none;">
      <div class="icon">ğŸ•’</div>
      <div class="title">Fila de Espera</div>
      <div class="desc">VisualizaÃ§Ã£o da fila de caminhÃµes</div>
    </a>

   <a class="card" href="index.html" id="cardPainelFila" style="display:none;">
      <div class="icon">ğŸ›ï¸</div>
      <div class="title">Painel da Fila</div>
      <div class="desc">Controle operacional da fila</div>
    </a>

    <a class="card" href="motoristas.html" id="cardDisponibilidade" style="display:none;">
      <div class="icon">ğŸ“</div>
      <div class="title">Disponibilidade</div>
      <div class="desc">Fila de disponibilidade de motoristas</div>
    </a>

    <a class="card" href="cadastro.html" id="cardCadastro" style="display:none;">
      <div class="icon">ğŸš›</div>
      <div class="title">Cadastro de CaminhÃµes</div>
      <div class="desc">Registro e gestÃ£o de veÃ­culos</div>
    </a>

    <a class="card" href="clientes-mapa.html" id="cardMapa" style="display:none;">
      <div class="icon">ğŸ—ºï¸</div>
      <div class="title">Mapa de Clientes</div>
      <div class="desc">VisualizaÃ§Ã£o geogrÃ¡fica dos clientes</div>
    </a>

    <a class="card" href="frete.html" id="cardFrete" style="display:none;">
      <div class="icon">ğŸ§®</div>
      <div class="title">CÃ¡lculo de Frete</div>
      <div class="desc">CÃ¡lculo de frete por rota</div>
    </a>
  
    <a class="card" href="clientes-admin.html" id="cardClientes" style="display:none;">
  <div class="icon">ğŸ—‚ï¸</div>
  <div class="title">AdministraÃ§Ã£o de Clientes</div>
  <div class="desc">GestÃ£o e manutenÃ§Ã£o dos clientes do sistema</div>
</a>
   <a class="card" 
   href="coordenadas-invalidas.html" 
   id="cardCoordenadas" 
   style="display:none; position:relative;">

  <div class="icon">ğŸ§­</div>
  <div class="title">Revisar Coordenadas</div>
  <div class="desc">
    Ajuste manual e correÃ§Ã£o de coordenadas invÃ¡lidas
  </div>

  <!-- Badge contador -->
  <div id="badgeCoords" class="badge-alerta" style="display:none;">0</div>

</a>


</a>



  </div>
</main>

<footer>
   2026 Â· Sistema Operacional LogÃ­stico - Â© Renato Monteiro
</footer>

</body>
</html>
