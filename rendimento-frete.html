<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cálculo de Rendimento de Frete</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --azul:#0d2b45;
  --vermelho:#c62828;
  --cinza:#e0e0e0;
  --cinza-esc:#bdbdbd;
}

body{
  font-family: Arial, Helvetica, sans-serif;
  background:#f4f6f8;
  margin:0;
}

.topo{
  background:var(--azul);
  color:#fff;
  padding:14px;
  text-align:center;
  font-weight:bold;
  letter-spacing:.5px;
}

.container{
  padding:16px;
}

.barra-info{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
  gap:10px;
  margin-bottom:14px;
}

.box{
  background:#eee;
  padding:10px;
  font-size:14px;
}

.box strong{
  display:block;
  font-size:13px;
}

input{
  width:100%;
  padding:6px;
  font-size:14px;
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}

thead th{
  background:#bdbdbd;
  padding:8px;
  border:1px solid #fff;
}

tbody td{
  background:#f5f5f5;
  padding:6px;
  border:1px solid #fff;
  text-align:right;
}

tbody td:first-child,
tbody td:nth-child(2){
  text-align:center;
}

tfoot td{
  background:#d0d7df;
  font-weight:bold;
  padding:8px;
  border:1px solid #fff;
}

.resumo{
  margin-top:14px;
}

.resumo table th{
  background:#bdbdbd;
}

.saldo-neg{
  background:#ffcdd2 !important;
  color:#b71c1c;
  font-weight:bold;
}

.saldo-pos{
  background:#c8e6c9 !important;
  color:#1b5e20;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="topo">
  CÁLCULO DE RENDIMENTO DE FRETE
</div>

<div class="container">

<!-- BARRA SUPERIOR -->
<div class="barra-info">
  <div class="box">
    <strong>PLACA</strong>
    <input id="placa" value="SYN-3193">
  </div>

  <div class="box">
    <strong>TEMPO GASTO (DIAS)</strong>
    <input id="dias" type="number" value="1">
  </div>

  <div class="box">
    <strong>MÉDIA DE CONSUMO (KM/L)</strong>
    <input id="consumo" type="number" value="3">
  </div>

  <div class="box">
    <strong>VALOR LT DIESEL</strong>
    <input id="diesel" type="number" step="0.01" value="5.69">
  </div>

  <div class="box">
    <strong>ENTREGAS</strong>
    <input id="entregas" type="number" value="4">
  </div>
</div>

<!-- TABELA PRINCIPAL -->
<table id="tabela">
<thead>
<tr>
  <th>ENTREGA</th>
  <th>TRAJETO</th>
  <th>DIST KM</th>
  <th>RECEITAS<br>FRETE</th>
  <th>FINAME</th>
  <th>DIESEL</th>
  <th>SALÁRIOS</th>
  <th>PNEUS</th>
  <th>MANUT</th>
  <th>FILIAL</th>
  <th>RESULTADO<br>SALDO</th>
</tr>
</thead>

<tbody>
<script>
for(let i=1;i<=7;i++){
  document.write(`
  <tr>
    <td>${i}</td>
    <td>DESTINO</td>
    <td><input class="km" type="number"></td>
    <td><input class="receita" type="number"></td>
    <td class="finame">598.96</td>
    <td class="dieselLinha">0</td>
    <td class="salario">229.16</td>
    <td class="pneu">0</td>
    <td class="manut">0</td>
    <td class="filial">0</td>
    <td class="saldo">0</td>
  </tr>
  `);
}
</script>
</tbody>

<tfoot>
<tr>
  <td colspan="2">TOTAIS</td>
  <td id="kmTotal">0</td>
  <td id="receitaTotal">R$ 0,00</td>
  <td>R$ 598,96</td>
  <td id="dieselTotal">R$ 0,00</td>
  <td>R$ 229,16</td>
  <td>R$ 0,00</td>
  <td>R$ 0,00</td>
  <td>R$ 0,00</td>
  <td id="saldoFinal">R$ 0,00</td>
</tr>
</tfoot>
</table>

<!-- RESUMO FINAL -->
<div class="resumo">
<table>
<thead>
<tr>
  <th>KM RODADO</th>
  <th>ÍNDICE</th>
  <th>TAXA</th>
  <th>M³</th>
  <th>UNIT MÉDIO</th>
  <th>TOTAL FRETE</th>
  <th>SALDO</th>
</tr>
</thead>
<tbody>
<tr>
  <td id="kmResumo">0</td>
  <td>R$ 5,8420</td>
  <td>R$ 669,32</td>
  <td>22.500</td>
  <td id="unitMedio">R$ 0,0000</td>
  <td id="totalFrete">R$ 0,00</td>
  <td id="saldoResumo" class="saldo-neg">R$ 0,00</td>
</tr>
</tbody>
</table>
</div>

</div>

<script>
function moeda(v){
  return v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
}

function calcular(){
  const kms = [...document.querySelectorAll(".km")];
  const receitas = [...document.querySelectorAll(".receita")];
  const consumo = +document.getElementById("consumo").value;
  const dieselValor = +document.getElementById("diesel").value;

  let kmTotal = 0;
  let receitaTotal = 0;

  kms.forEach(k=>kmTotal += +k.value || 0);
  receitas.forEach(r=>receitaTotal += +r.value || 0);

  const diesel = (kmTotal / consumo) * dieselValor;
  const custoFixo = 598.96 + 229.16;

  const saldo = receitaTotal - (diesel + custoFixo);

  kmResumo.innerText = kmTotal.toFixed(1);
  kmTotalEl.innerText = kmTotal.toFixed(1);
  receitaTotalEl.innerText = moeda(receitaTotal);
  dieselTotal.innerText = moeda(diesel);
  totalFrete.innerText = moeda(receitaTotal);
  saldoResumo.innerText = moeda(saldo);
  saldoFinal.innerText = moeda(saldo);

  saldoResumo.className = saldo >= 0 ? "saldo-pos" : "saldo-neg";
}

document.addEventListener("input", calcular);

const kmTotalEl = document.getElementById("kmTotal");
const receitaTotalEl = document.getElementById("receitaTotal");
</script>

</body>
</html>
